var ScrollTracker=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new s(r,i||t,o),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],l]:t._events[c].push(l):(t._events[c]=l,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,r,s=[];if(0===this._eventsCount)return s;for(r in t=this._events)e.call(t,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},l.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},l.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},l.prototype.emit=function(t,e,r,s,i,o){var l=n?n+t:t;if(!this._events[l])return!1;var c,a,h=this._events[l],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,s),!0;case 5:return h.fn.call(h.context,e,r,s,i),!0;case 6:return h.fn.call(h.context,e,r,s,i,o),!0}for(a=1,c=new Array(u-1);a<u;a++)c[a-1]=arguments[a];h.fn.apply(h.context,c)}else{var f,p=h.length;for(a=0;a<p;a++)switch(h[a].once&&this.removeListener(t,h[a].fn,void 0,!0),u){case 1:h[a].fn.call(h[a].context);break;case 2:h[a].fn.call(h[a].context,e);break;case 3:h[a].fn.call(h[a].context,e,r);break;case 4:h[a].fn.call(h[a].context,e,r,s);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];h[a].fn.apply(h[a].context,c)}}return!0},l.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,r,s){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return o(this,i),this;var l=this._events[i];if(l.fn)l.fn!==e||s&&!l.once||r&&l.context!==r||o(this,i);else{for(var c=0,a=[],h=l.length;c<h;c++)(l[c].fn!==e||s&&!l[c].once||r&&l[c].context!==r)&&a.push(l[c]);a.length?this._events[i]=1===a.length?a[0]:a:o(this,i)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(e);var n=t(e.exports);const r={throttle:function(t,e,n){var r,s,i,o,l=0;n||(n={});var c=function(){l=!1===n.leading?0:Date.now(),r=null,i&&(o=t.apply(s,i),r||(s=i=null))},a=function(){var a=Date.now();l||!1!==n.leading||(l=a);var h=e-(a-l);return s=this,i=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),l=a,o=t.apply(s,i),r||(s=i=null)):r||!1===n.trailing||(r=setTimeout(c,h)),o};return a.cancel=function(){clearTimeout(r),l=0,r=null},a},debounce:function(t,e,n){var r,s,i,o,l,c=function(){var a=Date.now()-o;a<e&&a>=0?r=setTimeout(c,e-a):(r=null,n||(l=t.apply(i,s),r||(i=s=null)))},a=function(){i=this,s=arguments,o=Date.now();var a=n&&!r;return r||(r=setTimeout(c,e)),a&&(l=t.apply(i,s),i=s=null),l};return a.cancel=function(){clearTimeout(r),r=null},a}};return class extends n{constructor(t){super(),void 0!==t.wait&&t.wait<100&&(t.wait=100);const e={target:window,mode:"throttle",wait:500};if(this.settings=Object.assign({},e,t),this.target=this.settings.target,this._scrollY=0,this._prevScrollY=0,this._deltaY=0,this._direction=0,this._scrollHandler=this._scrollHandler.bind(this),"throttle"===this.settings.mode){const e={};t.options?(e.leading=t.options.leading,e.trailing=t.options.trailing,this.returnFunction=r[this.settings.mode](this._processedScrollHandler.bind(this),this.settings.wait,e)):this.returnFunction=r[this.settings.mode](this._processedScrollHandler.bind(this),this.settings.wait),this.returnFunction=r[this.settings.mode](this._processedScrollHandler.bind(this),this.settings.wait,e)}else"debounce"===this.settings.mode?this.returnFunction=r[this.settings.mode](this._processedScrollHandler.bind(this),this.settings.wait,t.options?.immediate):console.error("[ScrollTracer] mode should be throttle or debounce")}get scrollY(){return this._scrollY}get deltaY(){return this._deltaY}get direction(){return Math.sign(this._deltaY)}get scrollHeight(){return this.target.document.body.offsetHeight-this.target.innerHeight}get scrollBarHeight(){return this.target.innerHeight*(this.target.innerHeight/this.target.document.body.offsetHeight)}get scrollRatio(){return this.scrollY/this.scrollHeight}_scrollHandler(t){this._scrollY=Math.round(this.target.scrollY),this._deltaY=this._scrollY-this._prevScrollY,this._prevScrollY=this._scrollY,this.emit("SCROLL",t)}_processedScrollHandler(t){this.emit("PROCESSED_SCROLL",t)}track(){this.target.addEventListener("scroll",this._scrollHandler),this.target.addEventListener("scroll",this.returnFunction),this.emit("TRACK")}untrack(){this.target.removeEventListener("scroll",this._scrollHandler),this.target.removeEventListener("scroll",this.returnFunction),this.emit("UNTRACK")}}}();
