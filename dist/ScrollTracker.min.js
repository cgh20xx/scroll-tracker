var ScrollTracker=function(){"use strict";var t={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var c=new i(r,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],c]:t._events[l].push(c):(t._events[l]=c,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},c.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},c.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,i,o,s){var c=n?n+t:t;if(!this._events[c])return!1;var l,a,u=this._events[c],f=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,o),!0;case 6:return u.fn.call(u.context,e,r,i,o,s),!0}for(a=1,l=new Array(f-1);a<f;a++)l[a-1]=arguments[a];u.fn.apply(u.context,l)}else{var h,v=u.length;for(a=0;a<v;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,void 0,!0),f){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,r);break;case 4:u[a].fn.call(u[a].context,e,r,i);break;default:if(!l)for(h=1,l=new Array(f-1);h<f;h++)l[h-1]=arguments[h];u[a].fn.apply(u[a].context,l)}}return!0},c.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var c=this._events[o];if(c.fn)c.fn!==e||i&&!c.once||r&&c.context!==r||s(this,o);else{for(var l=0,a=[],u=c.length;l<u;l++)(c[l].fn!==e||i&&!c[l].once||r&&c[l].context!==r)&&a.push(c[l]);a.length?this._events[o]=1===a.length?a[0]:a:s(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}(t);var e=t.exports,n="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")(),o=i.Symbol,s=Object.prototype,c=s.hasOwnProperty,l=s.toString,a=o?o.toStringTag:void 0;var u=Object.prototype.toString;var f="[object Null]",h="[object Undefined]",v=o?o.toStringTag:void 0;function p(t){return null==t?void 0===t?h:f:v&&v in Object(t)?function(t){var e=c.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=l.call(t);return r&&(e?t[a]=n:delete t[a]),i}(t):function(t){return u.call(t)}(t)}var g="[object Symbol]";var d=/\s/;var _=/^\s+/;function y(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&d.test(t.charAt(e)););return e}(t)+1).replace(_,""):t}function b(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var m=NaN,w=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,O=/^0o[0-7]+$/i,j=parseInt;function S(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&p(t)==g}(t))return m;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=y(t);var n=x.test(t);return n||O.test(t)?j(t.slice(2),n?2:8):w.test(t)?m:+t}var Y=function(){return i.Date.now()},H="Expected a function",T=Math.max,L=Math.min;function E(t,e,n){var r,i,o,s,c,l,a=0,u=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError(H);function v(e){var n=r,o=i;return r=i=void 0,a=e,s=t.apply(o,n)}function p(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-a>=o}function g(){var t=Y();if(p(t))return d(t);c=setTimeout(g,function(t){var n=e-(t-l);return f?L(n,o-(t-a)):n}(t))}function d(t){return c=void 0,h&&r?v(t):(r=i=void 0,s)}function _(){var t=Y(),n=p(t);if(r=arguments,i=this,l=t,n){if(void 0===c)return function(t){return a=t,c=setTimeout(g,e),u?v(t):s}(l);if(f)return clearTimeout(c),c=setTimeout(g,e),v(l)}return void 0===c&&(c=setTimeout(g,e)),s}return e=S(e)||0,b(n)&&(u=!!n.leading,o=(f="maxWait"in n)?T(S(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==c&&clearTimeout(c),a=0,r=l=i=c=void 0},_.flush=function(){return void 0===c?s:d(Y())},_}var C="Expected a function";const k={throttle:function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(C);return b(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),E(t,e,{leading:r,maxWait:e,trailing:i})},debounce:E};return class extends e{constructor(t){super(),void 0!==t.wait&&t.wait<100&&(t.wait=100);const e={target:window,mode:"throttle",wait:500};this.settings=Object.assign({},e,t),this.target=this.settings.target,this._scrollY=0,this._prevScrollY=0,this._deltaY=0,this._direction=0,this._scrollHandler=this._scrollHandler.bind(this),this.returnFunction=k[this.settings.mode](this._processedScrollHandler.bind(this),this.settings.wait,this.settings.options)}get scrollY(){return this._scrollY}get deltaY(){return this._deltaY}get direction(){return Math.sign(this._deltaY)}get scrollHeight(){return this.target.document.body.offsetHeight-this.target.innerHeight}get scrollBarHeight(){return this.target.innerHeight*(this.target.innerHeight/this.target.document.body.offsetHeight)}get scrollRatio(){return this.scrollY/this.scrollHeight}_scrollHandler(t){this._scrollY=Math.round(this.target.scrollY),this._deltaY=this._scrollY-this._prevScrollY,this._prevScrollY=this._scrollY,this.emit("SCROLL",t)}_processedScrollHandler(t){this.emit("PROCESSED_SCROLL",t)}track(){this.target.addEventListener("scroll",this._scrollHandler),this.target.addEventListener("scroll",this.returnFunction),this.emit("TRACK")}untrack(){this.target.removeEventListener("scroll",this._scrollHandler),this.target.removeEventListener("scroll",this.returnFunction),this.emit("UNTRACK")}}}();
